{% extends "base_generic.html" %}

{% block content %}
    <h1>Login</h1>
    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <label>Username:</label>
        <input type="text" name="username" required><br>

        <label>Password:</label>
        <input type="password" name="password" required><br>

        <button type="submit">Login</button>
    </form>
        <button type="register" name="register">Register</button>

    <script>
        // if already logged in, redirect to profile
        document.addEventListener("DOMContentLoaded", function () {
            if (localStorage.getItem("access_token")) {
                window.location.href = "/profile";  // redirect
            }
        });
    </script>
{% endblock %}